<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="referrer" content="no-referrer" />

    <meta name="author" content="httishere">





<title>vue source code 1.0 | HTTISHERE</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.2.0"></head>
<body>
    <div class="wrapper">
        <header>
  <nav class="navbar">
    <div class="container">
      <div class="navbar-header header-logo">
        <a href="/">HTTISHERE&#39;s Blog</a>
      </div>
      <div class="menu navbar-right">
        
        <a class="menu-item" href="/archives">Posts</a>
        
        <a class="menu-item" href="/category">Categories</a>
        
        <a class="menu-item" href="/tag">Tags</a>
        
        <a class="menu-item" href="/about">About</a>
        
        <input id="switch_default" type="checkbox" class="switch_default" />
        <label for="switch_default" class="toggleBtn"></label>
        <a
          href="javascript:;"
          rel="sidebar"
          style="margin-left: 20px;"
          onclick="addFav();"
          >ğŸŒŸ Bookmark</a
        >
      </div>
    </div>
  </nav>

  
  <nav class="navbar-mobile" id="nav-mobile">
    <div class="container">
      <div class="navbar-header">
        <div>
          <a href="/">HTTISHERE&#39;s Blog</a
          ><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
        </div>
        <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
      </div>
      <div class="menu" id="mobile-menu">
        
        <a class="menu-item" href="/archives">Posts</a>
        
        <a class="menu-item" href="/category">Categories</a>
        
        <a class="menu-item" href="/tag">Tags</a>
        
        <a class="menu-item" href="/about">About</a>
        
      </div>
    </div>
  </nav>
</header>
<script>
  var mobileBtn = function f() {
    var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
    var mobileMenu = document.getElementById("mobile-menu");
    if (toggleMenu.classList.contains("active")) {
      toggleMenu.classList.remove("active");
      mobileMenu.classList.remove("active");
    } else {
      toggleMenu.classList.add("active");
      mobileMenu.classList.add("active");
    }
  };
  function addFav() {
    var title = document.title;
    var URL = document.URL;
    try {
      window.external.addFavorite(URL, title);
    } catch (e) {
      try {
        window.sidebar.addPanel(title, URL, "");
      } catch (e) {
        alert("ç”±äºæµè§ˆå™¨çš„å®‰å…¨è®¾ç½®\nå¯ä»¥ä½¿ç”¨Ctrl+Dæˆ–è€…Command+Dè¿›è¡Œæ‰‹åŠ¨æ”¶è—");
      }
    }
  }
</script>

        <div class="main">
            <div class="container">
    
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">vue source code 1.0</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">httishere</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">01/22/2019&nbsp;&nbsp;15:00:23</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/vue/">vue</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <ul>
<li><p>å‰ç½®å‡†å¤‡<br><img src="https://upload-images.jianshu.io/upload_images/14447586-b4092d45e1f254ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/798/format/webp"></p>
<ul>
<li><p>FlowåŸºæœ¬è¯­æ³•<br>å¯¹ç±»å‹çš„é™åˆ¶ï¼Œæ£€æµ‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function sum(a: number, b:number) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; vueæºç å†…çš„ä¸€ä¸ªå‡½æ•°</span><br><span class="line">export function renderList (</span><br><span class="line">    val: any, &#x2F;&#x2F; anyè¡¨ç¤ºä¼ å…¥çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹</span><br><span class="line">    render: (</span><br><span class="line">        val: any,</span><br><span class="line">        keyOrIndex: string | number, &#x2F;&#x2F; è¡¨ç¤ºéœ€è¦æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—</span><br><span class="line">        index?: number &#x2F;&#x2F; ?ä»£è¡¨indexå¯ä»¥ä¸ä¼ ï¼Œä½†æ˜¯ä¼ çš„è¯ä¸€å®šè¦ä¼ å…¥æ•°å­—ç±»å‹ï¼›</span><br><span class="line">                       &#x2F;&#x2F; å¦‚æœé—®å·æ˜¯åœ¨å†’å·åé¢ï¼Œåˆ™è¿™ä¸ªå‚æ•°å¿…é¡»è¦ä¼ ï¼Œä½†å¯ä»¥æ˜¯æ•°å­—ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ç©º</span><br><span class="line">    ) &#x3D;&gt; VNode</span><br><span class="line">): ?Array&lt;VNode&gt;&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŸå‹å’ŒåŸå‹ç»§æ‰¿<br>Vueä»£ç ä¸­æ˜¯ä½¿ç”¨åŸå‹ç»§æ‰¿çš„æ–¹å¼å®ç°çˆ¶å­ç»„ä»¶å…±äº«åˆå§‹åŒ–ä»£ç çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Student(props) &#123;</span><br><span class="line">    this.name &#x3D; props.name || &#39;Unnamed&#39;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.hello &#x3D; function () &#123;</span><br><span class="line">    alert(&#39;Hello, &#39; + this.name + &#39;!&#39;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åŸºäºStudentæ‹“å±•å‡ºPrimaryStudent</span><br><span class="line">function PrimaryStudent(props) &#123;</span><br><span class="line">    &#x2F;&#x2F; è°ƒç”¨Studentæ„é€ å‡½æ•°ï¼Œç»‘å®šthiså˜é‡:</span><br><span class="line">    Student.call(this, props);</span><br><span class="line">    this.grade &#x3D; props.grade || 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶PrimaryStudentå¹¶æ²¡æœ‰ç»§æ‰¿Studentï¼Œå…¶åŸå‹é“¾è¿˜æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Object.prototype ----&gt; null</span><br></pre></td></tr></table></figure>
<p>è‹¥æ˜¯ç»§æ‰¿åˆ™åŸå‹é“¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶éœ€è¦ä¸€ä¸ªä¸­é—´å¯¹è±¡æ¥å®ç°ï¼Œå°†ä¸­é—´å¯¹è±¡çš„åŸå‹è¦æŒ‡å‘<code>Student.prototype</code>ï¼Œä¸èƒ½ç›´æ¥<code>PrimaryStudent.prototype = Student.prototype;</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç©ºå‡½æ•°F:</span><br><span class="line">function F() &#123;&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æŠŠFçš„åŸå‹æŒ‡å‘Student.prototype:</span><br><span class="line">F.prototype &#x3D; Student.prototype;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æŠŠPrimaryStudentçš„åŸå‹æŒ‡å‘ä¸€ä¸ªæ–°çš„Få¯¹è±¡ï¼ŒFå¯¹è±¡çš„åŸå‹æ­£å¥½æŒ‡å‘Student.prototype:</span><br><span class="line">PrimaryStudent.prototype &#x3D; new F();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æŠŠPrimaryStudentåŸå‹çš„æ„é€ å‡½æ•°ä¿®å¤ä¸ºPrimaryStudent:</span><br><span class="line">PrimaryStudent.prototype.constructor &#x3D; PrimaryStudent;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åœ¨PrimaryStudentåŸå‹ï¼ˆå°±æ˜¯new F()å¯¹è±¡ï¼‰ä¸Šå®šä¹‰æ–¹æ³•ï¼š</span><br><span class="line">PrimaryStudent.prototype.getGrade &#x3D; function () &#123;</span><br><span class="line">    return this.grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var Lilei &#x3D; new PrimaryStudent(&#123;</span><br><span class="line">    name: &#39;æé›·&#39;,</span><br><span class="line">    grade: 2</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F; éªŒè¯åŸå‹:</span><br><span class="line">Lilei.__proto__ &#x3D;&#x3D;&#x3D; PrimaryStudent.prototype; &#x2F;&#x2F; true</span><br><span class="line">Lilei.__proto__.__proto__ &#x3D;&#x3D;&#x3D; Student.prototype; &#x2F;&#x2F; true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; éªŒè¯ç»§æ‰¿å…³ç³»:</span><br><span class="line">Lilei instanceof PrimaryStudent; &#x2F;&#x2F; true</span><br><span class="line">Lilei instanceof Student; &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>
<p>åŸæ¥çš„åŸå‹é“¾ï¼š<br><img src="https://cdn.liaoxuefeng.com/cdn/files/attachments/001439872136313496e60e07ed143bda40a0200b12d8cc3000/l"><br>æ–°çš„åŸå‹é“¾ï¼š<br><img src="https://cdn.liaoxuefeng.com/cdn/files/attachments/001439872160923ca15925ec79f4692a98404ddb2ed5503000/l"></p>
<p>å°è£…è¿™ä¸ªç»§æ‰¿è¿‡ç¨‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function inherits(Child, Parent) &#123;</span><br><span class="line">    var F &#x3D; function () &#123;&#125;;</span><br><span class="line">    F.prototype &#x3D; Parent.prototype;</span><br><span class="line">    Child.prototype &#x3D; new F();</span><br><span class="line">    Child.prototype.constructor &#x3D; Child;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åJavaScriptçš„åŸå‹ç»§æ‰¿å®ç°æ–¹å¼å°±æ˜¯ï¼š<br>  å®šä¹‰æ–°çš„æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨å†…éƒ¨ç”¨call()è°ƒç”¨å¸Œæœ›â€œç»§æ‰¿â€çš„æ„é€ å‡½æ•°ï¼Œå¹¶ç»‘å®šthisï¼›<br>  å€ŸåŠ©ä¸­é—´å‡½æ•°Få®ç°åŸå‹é“¾ç»§æ‰¿ï¼Œæœ€å¥½é€šè¿‡å°è£…çš„inheritså‡½æ•°å®Œæˆï¼›<br>  ç»§ç»­åœ¨æ–°çš„æ„é€ å‡½æ•°çš„åŸå‹ä¸Šå®šä¹‰æ–°æ–¹æ³•ã€‚<br>å‚è€ƒï¼ˆè¿˜éœ€è¦æ·±å…¥ç ”ç©¶ï¼‰ï¼š<br><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/0014344997013405abfb7f0e1904a04ba6898a384b1e925000">å»–é›ªå³°jsæ•™ç¨‹</a><br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">ç»§æ‰¿ä¸åŸå‹é“¾</a></p>
</li>
<li><p>Object.defineProperty<br>ä½¿ç”¨å®ƒå®ç°å“åº”å¼æ•°æ®åŠŸèƒ½ï¼ˆæ•°æ®ç»‘å®šï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; vue å†…å®šä¹‰å“åº”å¼æ•°æ®</span><br><span class="line">export function defineReactive (</span><br><span class="line">    obj: Object,</span><br><span class="line">    key: string,</span><br><span class="line">    val: any,</span><br><span class="line">    customSetter?: ?Function,</span><br><span class="line">    shallow?: boolean</span><br><span class="line">) &#123;</span><br><span class="line">    .....</span><br><span class="line">    Object.defineProperty(obj, key, &#123;</span><br><span class="line">        enumerable: true, &#x2F;&#x2F; æ˜¯å¦å¯ä»¥éå†è¯¥key</span><br><span class="line">        configurable: true, &#x2F;&#x2F; æ˜¯å¦å¯ä»¥åˆ é™¤è¯¥keyæˆ–è€…é‡æ–°é…ç½®è¯¥key</span><br><span class="line">        get: function reactiveGetter () &#123;</span><br><span class="line">            const value &#x3D; getter ? getter.call(obj) : val</span><br><span class="line">            if (Dep.target) &#123;</span><br><span class="line">                dep.depend()</span><br><span class="line">                if (childOb) &#123;</span><br><span class="line">                    childOb.dep.depend()</span><br><span class="line">                    if (Array.isArray(value)) &#123;</span><br><span class="line">                        dependArray(value)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return value</span><br><span class="line">        &#125;,</span><br><span class="line">        set: function reactiveSetter (newVal) &#123;</span><br><span class="line">            const value &#x3D; getter ? getter.call(obj) : val</span><br><span class="line">            &#x2F;* eslint-disable no-self-compare *&#x2F;</span><br><span class="line">            if (newVal &#x3D;&#x3D;&#x3D; value || (newVal !&#x3D;&#x3D; newVal &amp;&amp; value !&#x3D;&#x3D; value)) &#123;</span><br><span class="line">                return</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;* eslint-enable no-self-compare *&#x2F;</span><br><span class="line">            if (process.env.NODE_ENV !&#x3D;&#x3D; &#39;production&#39; &amp;&amp; customSetter) &#123;</span><br><span class="line">                customSetter()</span><br><span class="line">            &#125;</span><br><span class="line">            if (setter) &#123;</span><br><span class="line">                setter.call(obj, newVal)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                val &#x3D; newVal</span><br><span class="line">            &#125;</span><br><span class="line">            childOb &#x3D; !shallow &amp;&amp; observe(newVal)</span><br><span class="line">            dep.notify()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Object.defineProperty</code>è¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºéœ€è¦è®¾ç½®çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦è®¾ç½®çš„é”®å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œé‡Œé¢å¯ä»¥æœ‰ï¼š<br>value: å¯¹åº”keyçš„å€¼<br>configurableï¼šæ˜¯å¦å¯ä»¥åˆ é™¤è¯¥keyæˆ–è€…é‡æ–°é…ç½®è¯¥key<br>enumerableï¼šæ˜¯å¦å¯ä»¥éå†è¯¥key<br>writableï¼šæ˜¯å¦å¯ä»¥ä¿®æ”¹è¯¥key<br>get: è·å–è¯¥keyå€¼æ—¶è°ƒç”¨çš„å‡½æ•°<br>set: è®¾ç½®è¯¥keyå€¼æ—¶è°ƒç”¨çš„å‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let x &#x3D; &#123;&#125;</span><br><span class="line">x[&#39;name&#39;] &#x3D; &#39;vue&#39;</span><br><span class="line">console.log(Object.getOwnPropertyDescriptor(x,&#39;name&#39;))</span><br><span class="line">&#x2F;&#x2F; Object.getOwnPropertyDescriptorå¯ä»¥è·å–å¯¹è±¡æŸä¸ªkeyçš„æè¿°å¯¹è±¡</span><br><span class="line">&#x2F;*</span><br><span class="line"> * &#123;</span><br><span class="line"> *  value: &quot;vue&quot;,</span><br><span class="line"> *  writable: true, </span><br><span class="line"> *  enumerable: true, </span><br><span class="line"> *  configurable: true</span><br><span class="line"> *  &#125;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯¹å…¶è¿›è¡Œæ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(x, &#39;name&#39;, &#123;</span><br><span class="line">  configurable: false</span><br><span class="line">&#125;)</span><br><span class="line">&#x2F;&#x2F; ç»“æœ</span><br><span class="line">delete x[&quot;name&quot;]; &#x2F;&#x2F; false</span><br><span class="line"></span><br><span class="line">Object.defineProperty(x, 0, &#123;</span><br><span class="line">    enumerable: false</span><br><span class="line">&#125;)</span><br><span class="line">&#x2F;&#x2F; ä¸èƒ½ä½¿ç”¨forç­‰å¾ªç¯å¯¹xè¿›è¡Œéå†</span><br></pre></td></tr></table></figure>
<p>åœ¨vueçš„Observerç±»ä¸­æœ‰ä¸‹é¢ä¸€è¡Œä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def(value, &#39;__ob__&#39;, this);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œdefæ˜¯ä¸ªå·¥å…·å‡½æ•°ï¼Œç›®çš„æ˜¯æƒ³ç»™valueæ·»åŠ ä¸€ä¸ªkeyä¸º__ob__ï¼Œå€¼ä¸ºthisï¼Œç¨‹åºä¸‹é¢è¦éå†valueå¯¹å…¶å­å†…å®¹è¿›è¡Œé€’å½’è®¾ç½®ï¼Œå¦‚æœç›´æ¥ç”¨value.__ob__è¿™ç§æ–¹å¼ï¼Œåœ¨éå†æ—¶åˆä¼šå–åˆ°é€ æˆï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æœ¬æ„ï¼Œæ‰€ä»¥defå‡½æ•°æ˜¯åˆ©ç”¨Object.definePropertyç»™valueæ·»åŠ çš„å±æ€§ï¼ŒåŒæ—¶enumerableè®¾ç½®ä¸ºfalseã€‚<br><code>set</code>å’Œ<code>get</code>ç±»ä¼¼äºåœ¨è·å–å¯¹è±¡å€¼å’Œè®¾ç½®å¯¹è±¡å€¼æ—¶åŠ äº†ä¸€ä¸ªä»£ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(x, &#39;name&#39;, &#123;</span><br><span class="line">    get: function()&#123;</span><br><span class="line">       console.log(&quot;getter called!&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function(newVal)&#123;</span><br><span class="line">        console.log(&quot;setter called! newVal is:&quot; + newVal)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥åœ¨è®¿é—®x[â€˜nameâ€™]æ—¶å›æ‰“å°getter calledï¼Œåœ¨è®¾ç½®x[â€˜nameâ€™] = â€˜httishereâ€™æ—¶ä¼šæ‰“å°setter called! newVal is:httishereï¼Œæ­£æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°äº†è®¿é—®å±æ€§æ—¶æ”¶é›†ä¾èµ–ï¼Œè®¾ç½®å±æ€§æ—¶æºç æœ‰ä¸€å¥dep.notifyï¼Œé‡Œé¢ä¾¿æ˜¯é€šçŸ¥è§†å›¾æ›´æ–°çš„ç›¸å…³æ“ä½œã€‚</p>
</li>
<li><p>Vnode<br>virtual nodeï¼Œè™šæ‹ŸèŠ‚ç‚¹ï¼ŒåŸç”ŸdomèŠ‚ç‚¹å¯¹è±¡éå¸¸å¤§ï¼Œè‹¥ç›´æ¥æ“ä½œdomï¼Œæ€§èƒ½ä»£ä»·ä¼šæ¯”è¾ƒå¤§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; vue å†…å¯¹vnodeçš„å®šä¹‰</span><br><span class="line">export default class VNode &#123;</span><br><span class="line">    tag: string | void;</span><br><span class="line">    data: VNodeData | void;</span><br><span class="line">    children: ?Array&lt;VNode&gt;;</span><br><span class="line">    text: string | void;</span><br><span class="line">    elm: Node | void;</span><br><span class="line">    ns: string | void;</span><br><span class="line">    context: Component | void; &#x2F;&#x2F; rendered in this component&#39;s scope</span><br><span class="line">    key: string | number | void;</span><br><span class="line">    componentOptions: VNodeComponentOptions | void;</span><br><span class="line">    componentInstance: Component | void; &#x2F;&#x2F; component instance</span><br><span class="line">    parent: VNode | void; &#x2F;&#x2F; component placeholder node</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; strictly internal</span><br><span class="line">    raw: boolean; &#x2F;&#x2F; contains raw HTML? (server only)</span><br><span class="line">    isStatic: boolean; &#x2F;&#x2F; hoisted static node</span><br><span class="line">    isRootInsert: boolean; &#x2F;&#x2F; necessary for enter transition check</span><br><span class="line">    isComment: boolean; &#x2F;&#x2F; empty comment placeholder?</span><br><span class="line">    isCloned: boolean; &#x2F;&#x2F; is a cloned node?</span><br><span class="line">    isOnce: boolean; &#x2F;&#x2F; is a v-once node?</span><br><span class="line">    asyncFactory: Function | void; &#x2F;&#x2F; async component factory function</span><br><span class="line">    asyncMeta: Object | void;</span><br><span class="line">    isAsyncPlaceholder: boolean;</span><br><span class="line">    ssrContext: Object | void;</span><br><span class="line">    fnContext: Component | void; &#x2F;&#x2F; real context vm for functional nodes</span><br><span class="line">    fnOptions: ?ComponentOptions; &#x2F;&#x2F; for SSR caching</span><br><span class="line">    fnScopeId: ?string;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œä»å…¨å±€çœ‹é—®é¢˜çš„æ–¹å¼å°±æ˜¯å¼‚æ­¥ï¼Œå…ˆæŠŠä¿®æ”¹æ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åæ•´æˆä¸€æ‰¹å»ä¿®æ”¹ï¼Œåšdiffï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queueWatcher(this);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡½æ•°æŸ¯é‡ŒåŒ–<br>å°†å¤šå‚æ•°çš„å‡½æ•°åŒ–ä½œå¤šä¸ªéƒ¨åˆ†å‡½æ•°å»è°ƒç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ä¾‹å­ ä¸€ä¸ªéœ€è¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°</span><br><span class="line">function getSum(a,b)&#123;</span><br><span class="line">    return a+b;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; æœ‰æ—¶å€™å¯èƒ½å‚æ•°çš„è·å¾—æ˜¯å¼‚æ­¥çš„ï¼Œå…¶ä»–å‚æ•°ä¼šåœ¨å¦ä¸€ä¸ªæ—¶é—´ç‚¹å†ä¼ å…¥</span><br><span class="line">function getSum(a)&#123;</span><br><span class="line">    return function(b)&#123;</span><br><span class="line">        return a+b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let f &#x3D; getSum(2)</span><br><span class="line">console.log(f(3))</span><br><span class="line">console.log(getSum(2)(3)) &#x2F;&#x2F; 5</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å‚æ•°å°±å¯ä»¥åœ¨ä¸åŒçš„æ—¶é—´ç‚¹ä¼ å…¥ï¼ŒVueæºç ä¸­æœ‰ä¸€ä¸ªplatformç›®å½•ï¼Œä¸“é—¨å­˜æ”¾å’Œå¹³å°ç›¸å…³çš„æºç ï¼Œå¯¹å‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–å°±å¯ä»¥ä¸ç”¨æ¯æ¬¡è¿è¡Œå°±è¿›è¡Œå¹³å°åˆ¤æ–­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function ...(å¹³å°ç›¸å…³å‚æ•°)&#123;</span><br><span class="line">    return function(å¹³å°ä¸ç›¸å…³å‚æ•°)&#123;</span><br><span class="line">      å¤„ç†é€»è¾‘</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨Vueçš„patchä»¥åŠç¼–è¯‘ç¯èŠ‚éƒ½åº”ç”¨äº†è¿™ç§æ–¹å¼ã€‚</p>
</li>
<li><p>Macrotaskä¸Microtask<br>ä¸jsçš„äº‹ä»¶å¾ªç¯æœºåˆ¶æ¯æ¯ç›¸å…³ï¼ŒVueæ›´æ–°ä¸æ˜¯æ•°æ®ä¸€æ”¹é©¬ä¸ŠåŒæ­¥æ›´æ–°è§†å›¾ï¼Œè€Œæ˜¯å°†æ›´æ”¹éƒ½æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼ŒåŒä¸€ä¸ªwatcherä¸ä¼šé‡å¤ï¼Œç„¶åå¼‚æ­¥å¤„ç†æ›´æ–°é€»è¾‘ã€‚åœ¨å®ç°å¼‚æ­¥çš„æ–¹å¼æ—¶ï¼Œjså®é™…æä¾›äº†ä¸¤ç§taskâ€“Macrotaskä¸Microtaskã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#39;script start&#39;);</span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">    console.log(&#39;setTimeout&#39;);</span><br><span class="line">    Promise.resolve().then(function() &#123;</span><br><span class="line">        console.log(&#39;promise3&#39;);</span><br><span class="line">    &#125;).then(function() &#123;</span><br><span class="line">        console.log(&#39;promise4&#39;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">Promise.resolve().then(function() &#123;</span><br><span class="line">    console.log(&#39;promise1&#39;);</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">    console.log(&#39;promise2&#39;);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&#39;script end&#39;);</span><br><span class="line">&#x2F;&#x2F; ç»“æœ</span><br><span class="line">script start</span><br><span class="line">script end</span><br><span class="line">promise1</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br><span class="line">promise3</span><br><span class="line">promise4</span><br></pre></td></tr></table></figure>
<p>jsäº‹ä»¶å¾ªç¯ä¸­æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªå«MacroTaskï¼Œä¸€ä¸ªMircroTaskï¼Œå¤§ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMacroTaskï¼‰è·‘å¤§ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸»æµç¨‹ç¨‹åºã€äº‹ä»¶å¤„ç†å‡½æ•°ã€setTimeoutç­‰ç­‰ï¼Œå°ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMircroTaskï¼‰è·‘å°ä»»åŠ¡ï¼Œæ¯”å¦‚Promiseï¼Œjsæ€»æ˜¯å…ˆä»å¤§ä»»åŠ¡é˜Ÿåˆ—æ‹¿ä¸€ä¸ªæ‰§è¡Œï¼Œç„¶åå†æŠŠæ‰€æœ‰å°ä»»åŠ¡é˜Ÿåˆ—å…¨éƒ¨æ‰§è¡Œå†å¾ªç¯å¾€å¤ã€‚<br>ä¸Šè¿°ä»£ç æ•´ä½“çš„ä»£ç æ®µå°±æ˜¯ä¸€ä¸ªå¤§ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•å†æ‰§è¡ŒåŒçº§æ‰€æœ‰å°ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä¹‹åå†å–ä¸€ä¸ªå¤§ä»»åŠ¡æ‰§è¡Œï¼Œæ­¤æ—¶å°±æ˜¯å–setTimeoutï¼Œä¹‹åå†æ˜¯è¿™é‡Œé¢çš„å°ä»»åŠ¡ã€‚<br>é‡ç‚¹æ˜¯<strong>ä¸Šé¢ç¨‹åºæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¤§ä»»åŠ¡</strong>ï¼Œ<br><a target="_blank" rel="noopener" href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">Macrotask Vs Microtask</a><br><a target="_blank" rel="noopener" href="https://juejin.im/entry/58d4df3b5c497d0057eb99ff">ç†è§£jsä¸­Macrotaskå’ŒMicrotask</a><br><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html">é˜®ä¸€å³° Eventloopç†è§£</a></p>
</li>
<li><p>é€’å½’ç¼–ç¨‹ç®—æ³•<br>Vueæºç ä¸­å¤§é‡ä½¿ç”¨äº†é€’å½’ç®—æ³•â€“æ¯”å¦‚dom diffç®—æ³•ã€astçš„ä¼˜åŒ–ã€ç›®æ ‡ä»£ç çš„ç”Ÿæˆç­‰ç­‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç»å…¸dom diffç®—æ³•</span><br><span class="line">while (oldStartIdx &lt;&#x3D; oldEndIdx &amp;&amp; newStartIdx &lt;&#x3D; newEndIdx) &#123;</span><br><span class="line">  if (isUndef(oldStartVnode)) &#123;</span><br><span class="line">    oldStartVnode &#x3D; oldCh[++oldStartIdx]; &#x2F;&#x2F; Vnode has been moved left</span><br><span class="line">  &#125; else if (isUndef(oldEndVnode)) &#123;</span><br><span class="line">    oldEndVnode &#x3D; oldCh[--oldEndIdx];</span><br><span class="line">  &#125; else if (sameVnode(oldStartVnode, newStartVnode)) &#123;</span><br><span class="line">    patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);</span><br><span class="line">    oldStartVnode &#x3D; oldCh[++oldStartIdx];</span><br><span class="line">    newStartVnode &#x3D; newCh[++newStartIdx];</span><br><span class="line">  &#125; else if (sameVnode(oldEndVnode, newEndVnode)) &#123;</span><br><span class="line">    patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);</span><br><span class="line">    oldEndVnode &#x3D; oldCh[--oldEndIdx];</span><br><span class="line">    newEndVnode &#x3D; newCh[--newEndIdx];</span><br><span class="line">  &#125; else if (sameVnode(oldStartVnode, newEndVnode)) &#123; &#x2F;&#x2F; Vnode moved right</span><br><span class="line">    patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);</span><br><span class="line">    canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));</span><br><span class="line">    oldStartVnode &#x3D; oldCh[++oldStartIdx];</span><br><span class="line">    newEndVnode &#x3D; newCh[--newEndIdx];</span><br><span class="line">  &#125; else if (sameVnode(oldEndVnode, newStartVnode)) &#123; &#x2F;&#x2F; Vnode moved left</span><br><span class="line">    patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);</span><br><span class="line">    canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);</span><br><span class="line">    oldEndVnode &#x3D; oldCh[--oldEndIdx];</span><br><span class="line">    newStartVnode &#x3D; newCh[++newStartIdx];</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    if (isUndef(oldKeyToIdx)) &#123; oldKeyToIdx &#x3D; createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); &#125;</span><br><span class="line">    idxInOld &#x3D; isDef(newStartVnode.key)</span><br><span class="line">      ? oldKeyToIdx[newStartVnode.key]</span><br><span class="line">      : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);</span><br><span class="line">    if (isUndef(idxInOld)) &#123; &#x2F;&#x2F; New element</span><br><span class="line">      createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      vnodeToMove &#x3D; oldCh[idxInOld];</span><br><span class="line">      if (sameVnode(vnodeToMove, newStartVnode)) &#123;</span><br><span class="line">        patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue);</span><br><span class="line">        oldCh[idxInOld] &#x3D; undefined;</span><br><span class="line">        canMove &amp;&amp; nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F; same key but different element. treat as new element</span><br><span class="line">        createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    newStartVnode &#x3D; newCh[++newStartIdx];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸»è¦æ˜¯ç”¨äºæ¯”è¾ƒæ–°æ—§VnodeèŠ‚ç‚¹ç„¶åæ›´æ–°å­èŠ‚ç‚¹ï¼Œè°ƒç”¨è€…æ˜¯patchVnodeå‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°è¿™éƒ¨åˆ†å‡½æ•°ä¸­åˆä¼šè°ƒç”¨ä¼špatchVnodeï¼Œè°ƒç”¨é“¾æ¡ä¸º:patchVnode-&gt;updateChildren-&gt;patchVnodeã€‚åŒæ—¶ï¼Œå³ä¾¿æ²¡æœ‰ç›´æ¥åº”ç”¨é€’å½’ï¼Œåœ¨å°†æ¨¡æ¿ç¼–è¯‘æˆASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä½¿ç”¨äº†æ ˆå»æ¨¡æ‹Ÿäº†é€’å½’çš„æ€æƒ³ï¼Œç”±æ­¤å¯è§é€’å½’ç®—æ³•çš„é‡è¦æ€§ã€‚ä¸ç®¡æ˜¯çœŸå®domè¿˜æ˜¯vnodeï¼Œå…¶å®æœ¬è´¨éƒ½æ˜¯æ ‘çŠ¶ç»“æ„ï¼Œæœ¬æ¥å°±æ˜¯é€’å½’å®šä¹‰çš„ä¸œè¥¿ã€‚</p>
</li>
<li><p>ç¼–è¯‘åŸç†åŸºç¡€çŸ¥è¯†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; vueå†…</span><br><span class="line">const ast &#x3D; parse(template.trim(), options)</span><br><span class="line">if (options.optimize !&#x3D;&#x3D; false) &#123;</span><br><span class="line">    optimize(ast, options)</span><br><span class="line">&#125;</span><br><span class="line">const code &#x3D; generate(ast, options)</span><br><span class="line">return &#123;</span><br><span class="line">    ast,</span><br><span class="line">    render: code.render,</span><br><span class="line">    staticRenderFns: code.staticRenderFns</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆé€šè¿‡parseå‡½æ•°å°†templateç¼–è¯‘ä¸ºæŠ½è±¡è¯­æ³•æ ‘astï¼Œç„¶åå¯¹astè¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œæœ€åç”Ÿæˆrenderå‡½æ•°ã€‚å°±æ˜¯å°†æ¨¡æ¿htmlç¼–è¯‘ä¸ºrenderå‡½æ•°ã€‚<br>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œå°±æ˜¯ä¸€ç§è¡¨ç°å¤§å®¶å…±åŒç‚¹çš„ç»“æ„ï¼Œå¾—åˆ°astæ˜¯ç¿»è¯‘çš„åŸºç¡€ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c914ccd498e7">Vueæºç è§£æå‡†å¤‡ç¯‡ from æµ·æ´‹ä¹‹æœ¨</a></p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>httishere</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://httishere.github.io/2019/01/22/vue1.0/">https://httishere.github.io/2019/01/22/vue1.0/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2021 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Good Good Study, Day Day Up.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"># ä»å…¥é—¨åˆ°æ”¾å¼ƒ</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/01/23/vue2.0/">vue source code 2.0</a>
            
            
            <a class="next" rel="next" href="/2019/01/22/constructor%20&%20prototype/">constructor & prototype</a>
            
        </section>
        
            <link rel="stylesheet" href="https://unpkg.com/gitalk@latest/dist/gitalk.css">
<div id="gitalk-container" style="margin-top: 50px;"></div>
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script src="https://priesttomb.github.io/js/md5.min.js"></script>
<script type="text/javascript">
    new Gitalk({
        clientID: '',
        clientSecret: '',
        id: window.location.pathname,
        repo: 'httIsHere.github.io',
        owner: 'httishere',
        admin: 'httishere',
        id: md5(location.pathname),
        distractionFreeMode: true
    }).render('gitalk-container')
</script>
        

    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© httishere | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
