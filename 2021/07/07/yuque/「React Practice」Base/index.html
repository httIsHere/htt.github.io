<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="referrer" content="no-referrer" />

    <meta name="author" content="httishere">





<title>ã€ŒReact Practiceã€Base | HTTISHERE</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.2.0"></head>
<body>
    <div class="wrapper">
        <header>
  <nav class="navbar">
    <div class="container">
      <div class="navbar-header header-logo">
        <a href="/">HTTISHERE&#39;s Blog</a>
      </div>
      <div class="menu navbar-right">
        
        <a class="menu-item" href="/archives">Posts</a>
        
        <a class="menu-item" href="/category">Categories</a>
        
        <a class="menu-item" href="/tag">Tags</a>
        
        <a class="menu-item" href="/about">About</a>
        
        <input id="switch_default" type="checkbox" class="switch_default" />
        <label for="switch_default" class="toggleBtn"></label>
        <a
          href="javascript:;"
          rel="sidebar"
          style="margin-left: 20px;"
          onclick="addFav();"
          >ğŸŒŸ Bookmark</a
        >
      </div>
    </div>
  </nav>

  
  <nav class="navbar-mobile" id="nav-mobile">
    <div class="container">
      <div class="navbar-header">
        <div>
          <a href="/">HTTISHERE&#39;s Blog</a
          ><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
        </div>
        <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
      </div>
      <div class="menu" id="mobile-menu">
        
        <a class="menu-item" href="/archives">Posts</a>
        
        <a class="menu-item" href="/category">Categories</a>
        
        <a class="menu-item" href="/tag">Tags</a>
        
        <a class="menu-item" href="/about">About</a>
        
      </div>
    </div>
  </nav>
</header>
<script>
  var mobileBtn = function f() {
    var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
    var mobileMenu = document.getElementById("mobile-menu");
    if (toggleMenu.classList.contains("active")) {
      toggleMenu.classList.remove("active");
      mobileMenu.classList.remove("active");
    } else {
      toggleMenu.classList.add("active");
      mobileMenu.classList.add("active");
    }
  };
  function addFav() {
    var title = document.title;
    var URL = document.URL;
    try {
      window.external.addFavorite(URL, title);
    } catch (e) {
      try {
        window.sidebar.addPanel(title, URL, "");
      } catch (e) {
        alert("ç”±äºæµè§ˆå™¨çš„å®‰å…¨è®¾ç½®\nå¯ä»¥ä½¿ç”¨Ctrl+Dæˆ–è€…Command+Dè¿›è¡Œæ‰‹åŠ¨æ”¶è—");
      }
    }
  }
</script>

        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">ã€ŒReact Practiceã€Base</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">httishere</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">07/07/2021&nbsp;&nbsp;9:59:12</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/React/">React</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <blockquote>
<p>ã€ŒReact Practiceã€ç³»åˆ—æ•™ç¨‹æ˜¯å­¦ä¹ ç‹æ²›è€å¸ˆçš„ã€React å®æˆ˜è¿›é˜¶ã€‘è¯¾ç¨‹çš„å­¦ä¹ è®°å½•ï¼Œdemo å‚è€ƒæ¥è‡ª<a target="_blank" rel="noopener" href="https://codesandbox.io/s/6n20nrzlxz">https://codesandbox.io/s/6n20nrzlxz</a>ã€‚<br><strong>éåŸåˆ›ï¼Œä»…ä½œä¸ºå­¦ä¹ è®°å½•ã€‚</strong></p>
</blockquote>
<h3 id="React-ç»„ä»¶ï¼ˆprops-state-gt-viewï¼‰"><a href="#React-ç»„ä»¶ï¼ˆprops-state-gt-viewï¼‰" class="headerlink" title="React ç»„ä»¶ï¼ˆprops + state =&gt; viewï¼‰"></a>React ç»„ä»¶ï¼ˆprops + state =&gt; viewï¼‰</h3><ul>
<li>React ç»„ä»¶ä¸€èˆ¬ä¸æä¾›æ–¹æ³•ï¼Œè€Œæ˜¯æŸç§çŠ¶æ€æœºï¼›</li>
<li>React ç»„ä»¶å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªçº¯å‡½æ•°ï¼›</li>
<li>å•å‘æ•°æ®ç»‘å®šï¼›</li>
</ul>
<h4 id="ç»„ä»¶ç±»å‹"><a href="#ç»„ä»¶ç±»å‹" class="headerlink" title="ç»„ä»¶ç±»å‹"></a>ç»„ä»¶ç±»å‹</h4><ul>
<li>å—æ§ç»„ä»¶ï¼šè¡¨å•å…ƒç´ çŠ¶æ€ç”±ä½¿ç”¨è€…ç»´æŠ¤ï¼›</li>
<li>éå—æ§ç»„ä»¶ï¼šè¡¨å•å…ƒç´ çŠ¶æ€ DOM è‡ªèº«ç»´æŠ¤ï¼›</li>
</ul>
<h4 id="åˆ›å»ºç»„ä»¶ï¼Œå•ä¸€èŒè´£åŸåˆ™"><a href="#åˆ›å»ºç»„ä»¶ï¼Œå•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="åˆ›å»ºç»„ä»¶ï¼Œå•ä¸€èŒè´£åŸåˆ™"></a>åˆ›å»ºç»„ä»¶ï¼Œå•ä¸€èŒè´£åŸåˆ™</h4><ul>
<li>æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼›</li>
<li>å¦‚æœç»„ä»¶å˜å¾—å¤æ‚ï¼Œå°±éœ€è¦æ‹†åˆ†æˆå°ç»„ä»¶ï¼ˆæ‹†åˆ†å¤æ‚åº¦ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œæ— éœ€é‡æ–°æ¸²æŸ“æ•´ä¸ªå¤§ç»„ä»¶ï¼‰ï¼›</li>
</ul>
<h4 id="æ•°æ®çŠ¶æ€ç®¡ç†ï¼ŒDRY-åŸåˆ™"><a href="#æ•°æ®çŠ¶æ€ç®¡ç†ï¼ŒDRY-åŸåˆ™" class="headerlink" title="æ•°æ®çŠ¶æ€ç®¡ç†ï¼ŒDRY åŸåˆ™"></a>æ•°æ®çŠ¶æ€ç®¡ç†ï¼ŒDRY åŸåˆ™</h4><ul>
<li>èƒ½è®¡ç®—å¾—åˆ°çš„çŠ¶æ€ä¸è¦å•ç‹¬å‚¨å­˜ï¼›</li>
<li>ç»„ä»¶å°½é‡æ— çŠ¶æ€ï¼Œæ‰€éœ€æ•°æ®é€šè¿‡ props è·å–ï¼›</li>
</ul>
<h3 id="JSXï¼Œä¸æ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œè€Œæ˜¯è¯­æ³•ç³–"><a href="#JSXï¼Œä¸æ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œè€Œæ˜¯è¯­æ³•ç³–" class="headerlink" title="JSXï¼Œä¸æ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œè€Œæ˜¯è¯­æ³•ç³–"></a>JSXï¼Œä¸æ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œè€Œæ˜¯è¯­æ³•ç³–</h3><p>åœ¨ JavaScript ä»£ç å†…ç›´æ¥å†™ HTML æ ‡è®°ã€‚<br>æœ¬è´¨æ˜¯<strong>åŠ¨æ€åˆ›å»ºç»„ä»¶çš„è¯­æ³•ç³–</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;htt&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>; <span class="comment">// æ›´ç›´è§‚</span></span><br><span class="line"></span><br><span class="line">||</span><br><span class="line">||</span><br><span class="line">\/</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;htt&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> element = React.createElement(<span class="string">&#x27;h1&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;Hello, &#x27;</span>, name);</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨-JSX-å†…ä½¿ç”¨è¡¨è¾¾å¼"><a href="#åœ¨-JSX-å†…ä½¿ç”¨è¡¨è¾¾å¼" class="headerlink" title="åœ¨ JSX å†…ä½¿ç”¨è¡¨è¾¾å¼"></a>åœ¨ JSX å†…ä½¿ç”¨è¡¨è¾¾å¼</h4><ul>
<li>JSX æœ¬èº«ä¹Ÿæ˜¯è¡¨è¾¾å¼</li>
<li>åœ¨å±æ€§ä¸­ä½¿ç”¨è¡¨è¾¾å¼</li>
<li>å»¶å±•å±æ€§</li>
<li>è¡¨è¾¾å¼ä½œä¸ºå­å…ƒç´ </li>
</ul>
<h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul>
<li>å£°æ˜å¼åˆ›å»ºç•Œé¢çš„ç›´è§‚</li>
<li>ä»£ç åŠ¨æ€åˆ›å»ºç•Œé¢çš„çµæ´»</li>
<li>æ— éœ€å­¦ä¹ æ–°çš„æ¨¡ç‰ˆè¯­è¨€</li>
</ul>
<h4 id="è§„èŒƒï¼šè‡ªå®šä¹‰ç»„ä»¶ä»¥å¤§å†™å­—æ¯å¼€å¤´"><a href="#è§„èŒƒï¼šè‡ªå®šä¹‰ç»„ä»¶ä»¥å¤§å†™å­—æ¯å¼€å¤´" class="headerlink" title="è§„èŒƒï¼šè‡ªå®šä¹‰ç»„ä»¶ä»¥å¤§å†™å­—æ¯å¼€å¤´"></a>è§„èŒƒï¼šè‡ªå®šä¹‰ç»„ä»¶ä»¥å¤§å†™å­—æ¯å¼€å¤´</h4><ul>
<li>React è®¤ä¸ºå°å†™çš„ tag æ˜¯åŸç”Ÿ DOM èŠ‚ç‚¹</li>
<li>JSX æ ‡è®°å¯ä»¥ç›´æ¥ä½¿ç”¨å±æ€§è¯­æ³•ï¼Œä¾‹å¦‚ <code>&lt;menu.item /&gt;</code></li>
</ul>
<h3 id="React-ç”Ÿå‘½å‘¨æœŸ"><a href="#React-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="React ç”Ÿå‘½å‘¨æœŸ"></a>React ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://cdn.nlark.com/yuque/0/2021/png/250093/1625625250571-e908437a-78eb-4c2e-a756-c9a040c0cb03.png#align=left&display=inline&height=630&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1260&originWidth=2254&size=229873&status=done&style=none&width=1127" alt="image.png"><br>å›¾ç‰‡æ¥æºï¼š<a target="_blank" rel="noopener" href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</a><br><code>commit</code>ï¼šReact æŠŠå½“å‰çš„çŠ¶æ€æ˜ å°„åˆ° DOMï¼Œå®é™…çš„æ›´æ–° DOM èŠ‚ç‚¹ã€‚</p>
<h4 id="æŒ‚è½½æ—¶ï¼š"><a href="#æŒ‚è½½æ—¶ï¼š" class="headerlink" title="æŒ‚è½½æ—¶ï¼š"></a>æŒ‚è½½æ—¶ï¼š</h4><ul>
<li><code>constructor</code>Â ï¼šç”¨äºåˆå§‹åŒ–å†…éƒ¨çŠ¶æ€ï¼Œè¾ƒå°‘ä½¿ç”¨ï¼›å”¯ä¸€å¯ä»¥ç›´æ¥èµ‹å€¼ä¿®æ”¹ state çš„åœ°æ–¹ï¼›</li>
<li><code>getDerivedStateFromProps</code>Â ï¼šå½“ state éœ€è¦ä» props åˆå§‹åŒ–æ—¶ä½¿ç”¨ï¼›å°½é‡ä¸è¦ä½¿ç”¨ï¼šç»´æŠ¤ä¸¤è€…çŠ¶æ€ä¸€è‡´æ€§ä¼šå¢åŠ å¤æ‚åº¦ï¼›æ¯æ¬¡ render éƒ½ä¼šè°ƒç”¨ï¼›å…¸å‹åœºæ™¯ï¼šè¡¨å•æ§ä»¶è·å–é»˜è®¤å€¼ï¼›</li>
<li><code>componentDidMount</code>Â ï¼šUI æ¸²æŸ“å®Œæˆåè°ƒç”¨ï¼›åªæ‰§è¡Œä¸€æ¬¡ï¼›å…¸å‹åœºæ™¯ï¼šè·å–å¤–éƒ¨èµ„æºï¼›</li>
</ul>
<h4 id="æ›´æ–°æ—¶ï¼šä¼ å…¥æ–°çš„-props-å†…éƒ¨-state-æ”¹å˜-force-updateï¼›"><a href="#æ›´æ–°æ—¶ï¼šä¼ å…¥æ–°çš„-props-å†…éƒ¨-state-æ”¹å˜-force-updateï¼›" class="headerlink" title="æ›´æ–°æ—¶ï¼šä¼ å…¥æ–°çš„ props/å†…éƒ¨ state æ”¹å˜/force updateï¼›"></a>æ›´æ–°æ—¶ï¼šä¼ å…¥æ–°çš„ props/å†…éƒ¨ state æ”¹å˜/force updateï¼›</h4><ul>
<li><code>shouldComponentUpdate</code>Â ï¼šå†³å®š Virtual DOM æ˜¯å¦éœ€è¦é‡ç»˜ï¼Œæ— éœ€å˜åŒ–å¯ä»¥è¿”å› falseï¼›ä¸€èˆ¬ç”± PureComponent è‡ªåŠ¨å®ç°ï¼›å…¸å‹åœºæ™¯ï¼šæ€§èƒ½ä¼˜åŒ–ï¼›</li>
<li><code>getSnapshotBeforeUpdate</code>Â ï¼šåœ¨ render ä¹‹å‰è°ƒç”¨ï¼Œstate å·²æ›´æ–°ï¼›å…¸å‹åœºæ™¯ï¼šè·å– render ä¹‹å‰çš„ DOM çŠ¶æ€ï¼›æ³¨ï¼šgetSnapshotBeforeUpdate() should be used with componentDidUpdate()ï¼›</li>
<li><code>componentDidUpdate</code>ï¼šæ¯æ¬¡ UI æ›´æ–°æ—¶è°ƒç”¨ï¼›å…¸å‹åœºæ™¯ï¼šé¡µé¢éœ€è¦æ ¹æ® props å˜åŒ–é‡æ–°è·å–æ•°æ®ï¼›</li>
</ul>
<h4 id="å¸è½½æ—¶ï¼š"><a href="#å¸è½½æ—¶ï¼š" class="headerlink" title="å¸è½½æ—¶ï¼š"></a>å¸è½½æ—¶ï¼š</h4><ul>
<li><code>componentWillUnmount</code>Â ï¼šç»„ä»¶ç§»é™¤æ—¶è°ƒç”¨ï¼›å…¸å‹åœºæ™¯ï¼šèµ„æºé‡Šæ”¾ï¼›</li>
</ul>
<h4 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Clock constructed&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123; <span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Clock did mount&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.timerID = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="built_in">this</span>.tick(), <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Clock will unmount&quot;</span>);</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timerID);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Clock did update&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">tick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      date: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="built_in">this</span>.state.date.toLocaleTimeString()&#125;.&lt;/h2&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">SnapshotSample</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    messages: [],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleNewMessage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">prev</span>) =&gt;</span> (&#123;</span><br><span class="line">      messages: [<span class="string">`msg <span class="subst">$&#123;prev.messages.length&#125;</span>`</span>, ...prev.messages],</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) <span class="built_in">this</span>.handleNewMessage();</span><br><span class="line">    <span class="built_in">this</span>.interval = <span class="built_in">window</span>.setInterval(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.state.messages.length &gt; <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.clearInterval(<span class="built_in">this</span>.interval);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.handleNewMessage();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.clearInterval(<span class="built_in">this</span>.interval);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">getSnapshotBeforeUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.rootNode.scrollHeight;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps, prevState, prevScrollHeight</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> scrollTop = <span class="built_in">this</span>.rootNode.scrollTop;</span><br><span class="line">    <span class="keyword">if</span> (scrollTop &lt; <span class="number">5</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.rootNode.scrollTop =</span><br><span class="line">      scrollTop + (<span class="built_in">this</span>.rootNode.scrollHeight - prevScrollHeight);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;snapshot-sample&quot;</span> ref=&#123;<span class="function">(<span class="params">n</span>) =&gt;</span> (<span class="built_in">this</span>.rootNode = n)&#125;&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.messages.map(<span class="function">(<span class="params">msg</span>) =&gt;</span> (</span><br><span class="line">          &lt;div&gt;&#123;msg&#125;&lt;/div&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Virtual-DOMï¼ŒJSX-è¿è¡ŒåŸºç¡€"><a href="#Virtual-DOMï¼ŒJSX-è¿è¡ŒåŸºç¡€" class="headerlink" title="Virtual DOMï¼ŒJSX è¿è¡ŒåŸºç¡€"></a>Virtual DOMï¼ŒJSX è¿è¡ŒåŸºç¡€</h3><h4 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h4><p>Diffï¼šå¯¹å‰åä¸¤ä¸ª DOM æ ‘è¿›è¡Œ<strong>å¹¿åº¦ä¼˜å…ˆåˆ†å±‚æ¯”è¾ƒ</strong>ï¼Œå¯¹èŠ‚ç‚¹è¿›è¡Œä¸€å±‚ä¸€å±‚çš„æ¯”è¾ƒï¼›å¤æ‚åº¦ä¸º <code>O(n)</code>Â ï¼Œå¦åˆ™ä¸¤æ£µæ ‘çš„æ¯”è¾ƒå¤æ‚åº¦ä¸º O(n)ï¼›<br>é’ˆå¯¹ UI è¿™ç§æ ‘ç»“æ„ç›¸å¯¹ç¨³å®šçš„åœºæ™¯ä¸‹ä¸ä¼šé€ æˆè¾ƒå¤§çš„æ€§èƒ½é—®é¢˜ï¼›</p>
<ul>
<li>ç»„ä»¶çš„ DOM ç»“æ„ç›¸å¯¹ç¨³å®šï¼›</li>
<li>ç±»å‹ç›¸åŒçš„å…„å¼ŸèŠ‚ç‚¹å¯ä»¥è¢«å”¯ä¸€æ ‡è¯†ï¼ˆkey å±æ€§ï¼Œå¯ä»¥æé«˜æ€§èƒ½ï¼‰ï¼›</li>
</ul>
<h4 id="DEMO-1"><a href="#DEMO-1" class="headerlink" title="DEMO"></a>DEMO</h4><p><a target="_blank" rel="noopener" href="https://supnate.github.io/react-dom-diff/index.html">https://supnate.github.io/react-dom-diff/index.html</a></p>
<h3 id="é«˜é˜¶ç»„ä»¶-amp-å‡½æ•°ä½œä¸ºå­ç»„ä»¶ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰"><a href="#é«˜é˜¶ç»„ä»¶-amp-å‡½æ•°ä½œä¸ºå­ç»„ä»¶ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰" class="headerlink" title="é«˜é˜¶ç»„ä»¶&amp;å‡½æ•°ä½œä¸ºå­ç»„ä»¶ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰"></a>é«˜é˜¶ç»„ä»¶&amp;å‡½æ•°ä½œä¸ºå­ç»„ä»¶ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰</h3><blockquote>
<p>å®ç°æ›´å¤šåœºæ™¯çš„ç»„ä»¶å¤ç”¨ã€‚</p>
</blockquote>
<h4 id="é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼ŒHigher-Order-Componentï¼‰"><a href="#é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼ŒHigher-Order-Componentï¼‰" class="headerlink" title="é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼ŒHigher Order Componentï¼‰"></a>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼ŒHigher Order Componentï¼‰</h4><blockquote>
<p>æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ–°çš„ç»„ä»¶ã€‚</p>
</blockquote>
<p>å¯ä»¥å®ç°ä¸€äº›é€šç”¨å‡½æ•°ï¼Œä½†è‡ªèº«å¹¶ä¸åŒ…å« UIã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é«˜é˜¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">withTimer</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123; <span class="attr">time</span>: <span class="keyword">new</span> <span class="built_in">Date</span>() &#125;;</span><br><span class="line">    <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.timerID = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="built_in">this</span>.tick(), <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timerID);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">tick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        time: <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">time</span>=<span class="string">&#123;this.state.time&#125;</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦è°ƒç”¨çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> withTimer <span class="keyword">from</span> <span class="string">&quot;./withTimer.jsx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">showTimer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;this.props.time.toLocaleString()&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withTimer(showTimer); <span class="comment">// æš´éœ²è¢«é«˜é˜¶åŒ…è£…è¿‡çš„ç»„ä»¶</span></span><br></pre></td></tr></table></figure>

<h4 id="å‡½æ•°ä½œä¸ºå­ç»„ä»¶"><a href="#å‡½æ•°ä½œä¸ºå­ç»„ä»¶" class="headerlink" title="å‡½æ•°ä½œä¸ºå­ç»„ä»¶"></a>å‡½æ•°ä½œä¸ºå­ç»„ä»¶</h4><p>ç”¨æ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.children(&quot;HTT&quot;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ—¶</span></span><br><span class="line">&lt;MyComponent&gt;&#123;<span class="function">(<span class="params">name</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&lt;/MyComponent&gt;;</span><br></pre></td></tr></table></figure>

<p>Demoï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AdvancedTabSelector</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    value: PropTypes.object,</span><br><span class="line">    options: PropTypes.array,</span><br><span class="line">    onChange: PropTypes.func,</span><br><span class="line">    children: PropTypes.func,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    value: <span class="literal">null</span>,</span><br><span class="line">    options: [],</span><br><span class="line">    onChange: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">    children: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; options, value, onChange &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;tab-selector&quot;</span>&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;options.map(<span class="function">(<span class="params">opt</span>) =&gt;</span> (</span><br><span class="line">            &lt;li</span><br><span class="line">              key=&#123;opt.value&#125;</span><br><span class="line">              className=&#123;<span class="string">`tab-item <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">                opt.value === <span class="built_in">this</span>.props.value ? <span class="string">&quot;selected&quot;</span> : <span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="subst">              &#125;</span>`</span>&#125;</span><br><span class="line">              onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.props.onChange(opt.value)&#125;</span><br><span class="line">            &gt;</span><br><span class="line">              &#123;opt.name&#125;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &#123;<span class="built_in">this</span>.props.value &amp;&amp; <span class="built_in">this</span>.props.children(<span class="built_in">this</span>.props.value)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> colors = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Red&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;red&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Blue&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;blue&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Orange&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;orange&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animals = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Tiger&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;tiger&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Elephant&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;elephant&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;Cow&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;cow&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AdvancedTabSelectorSample</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    color: <span class="literal">null</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;Select color: &lt;/h3&gt;</span><br><span class="line">        &lt;AdvancedTabSelector</span><br><span class="line">          options=&#123;colors&#125;</span><br><span class="line">          value=&#123;<span class="built_in">this</span>.state.color&#125;</span><br><span class="line">          onChange=&#123;<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="built_in">this</span>.setState(&#123; <span class="attr">color</span>: c &#125;)&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;<span class="function">(<span class="params">color</span>) =&gt;</span> (</span><br><span class="line">            &lt;span</span><br><span class="line">              style=&#123;&#123;</span><br><span class="line">                display: <span class="string">&quot;inline-block&quot;</span>,</span><br><span class="line">                backgroundColor: color,</span><br><span class="line">                width: <span class="string">&quot;40px&quot;</span>,</span><br><span class="line">                height: <span class="string">&quot;40px&quot;</span>,</span><br><span class="line">              &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/AdvancedTabSelector&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h3&gt;Select animal: &lt;/h3&gt;</span><br><span class="line">        &lt;AdvancedTabSelector</span><br><span class="line">          options=&#123;animals&#125;</span><br><span class="line">          value=&#123;<span class="built_in">this</span>.state.animal&#125;</span><br><span class="line">          onChange=&#123;<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="built_in">this</span>.setState(&#123; <span class="attr">animal</span>: c &#125;)&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;<span class="function">(<span class="params">animal</span>) =&gt;</span> (</span><br><span class="line">            &lt;img width=<span class="string">&quot;100px&quot;</span> src=&#123;<span class="built_in">require</span>(<span class="string">`../../images/<span class="subst">$&#123;animal&#125;</span>.png`</span>)&#125; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/AdvancedTabSelector&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Context-APIï¼ˆReact-16-3-æ–°ç‰¹æ€§ï¼Œä¹‹å‰ç‰ˆæœ¬éƒ½æ˜¯å†…éƒ¨-APIï¼‰"><a href="#Context-APIï¼ˆReact-16-3-æ–°ç‰¹æ€§ï¼Œä¹‹å‰ç‰ˆæœ¬éƒ½æ˜¯å†…éƒ¨-APIï¼‰" class="headerlink" title="Context APIï¼ˆReact 16.3 æ–°ç‰¹æ€§ï¼Œä¹‹å‰ç‰ˆæœ¬éƒ½æ˜¯å†…éƒ¨ APIï¼‰"></a>Context APIï¼ˆReact 16.3 æ–°ç‰¹æ€§ï¼Œä¹‹å‰ç‰ˆæœ¬éƒ½æ˜¯å†…éƒ¨ APIï¼‰</h3><ul>
<li>æ ¹èŠ‚ç‚¹ï¼šProvider</li>
<li>å­èŠ‚ç‚¹ï¼šConsumer</li>
</ul>
<blockquote>
<p>æ— éœ€æ‰‹åŠ¨å»ç›‘å¬ç»„ä»¶å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ç„¶åå»é‡æ–°æ›´æ–°ç»„ä»¶ï¼Œcontext api ä¼šè‡ªåŠ¨ç›‘å¬çŠ¶æ€å˜åŒ–ã€‚</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> enStrings = &#123;</span><br><span class="line">  submit: <span class="string">&quot;Submit&quot;</span>,</span><br><span class="line">  cancel: <span class="string">&quot;Cancel&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cnStrings = &#123;</span><br><span class="line">  submit: <span class="string">&quot;æäº¤&quot;</span>,</span><br><span class="line">  cancel: <span class="string">&quot;å–æ¶ˆ&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> LocaleContext = React.createContext(enStrings);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºæä¾›ä¸Šä¸‹æ–‡æ•°æ®ï¼Œå¹¶åˆ‡æ¢ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocaleProvider</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">locale</span>: cnStrings &#125;;</span><br><span class="line">  toggleLocale = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> locale = <span class="built_in">this</span>.state.locale === enStrings ? cnStrings : enStrings;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; locale &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;LocaleContext.Provider value=&#123;<span class="built_in">this</span>.state.locale&#125;&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.toggleLocale&#125;&gt;åˆ‡æ¢è¯­è¨€&lt;/button&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.children&#125;</span><br><span class="line">      &lt;/LocaleContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocaledButtons</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;LocaleContext.Consumer&gt;</span><br><span class="line">        &#123;<span class="function">(<span class="params">locale</span>) =&gt;</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;button&gt;&#123;locale.cancel&#125;&lt;<span class="regexp">/button&gt;Â &lt;button&gt;&#123;locale.submit&#125;&lt;/</span>button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/LocaleContext.Consumer&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;LocaleProvider&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;LocaledButtons /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/LocaleProvider&gt;</span><br><span class="line">    &#123;<span class="comment">/* è¿™ä¸ªç»„ä»¶å°±æ²¡æœ‰localeå±æ€§ */</span>&#125;</span><br><span class="line">    &lt;LocaledButtons /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="è„šæ‰‹æ¶å·¥å…·"><a href="#è„šæ‰‹æ¶å·¥å…·" class="headerlink" title="è„šæ‰‹æ¶å·¥å…·"></a>è„šæ‰‹æ¶å·¥å…·</h3><p>â€¢ create-react-appï¼ˆå…¥é—¨ï¼Œå°é¡¹ç›®ï¼Œç®€æ˜“é¡¹ç›®ï¼‰<br>â€¢ Rekitï¼ˆåŸºäº create-react-app æä¾›äº†æ›´å¤šåŠŸèƒ½ï¼Œé€‚åˆå¤§é¡¹ç›®ï¼‰<br>â€¢ Codesandboxï¼ˆåœ¨çº¿åˆ›å»ºï¼‰</p>
<h3 id="æ‰“åŒ…å’Œéƒ¨ç½²"><a href="#æ‰“åŒ…å’Œéƒ¨ç½²" class="headerlink" title="æ‰“åŒ…å’Œéƒ¨ç½²"></a>æ‰“åŒ…å’Œéƒ¨ç½²</h3><h4 id="æ‰“åŒ…ï¼ˆwebpack-gt-loaderï¼‰"><a href="#æ‰“åŒ…ï¼ˆwebpack-gt-loaderï¼‰" class="headerlink" title="æ‰“åŒ…ï¼ˆwebpack-&gt;loaderï¼‰"></a>æ‰“åŒ…ï¼ˆwebpack-&gt;loaderï¼‰</h4><p>â€¢ ç¼–è¯‘ ES6 è¯­æ³•ç‰¹æ€§ï¼Œç¼–è¯‘ JSXï¼›<br>â€¢ æ•´åˆèµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œless/sassï¼›<br>â€¢ ä¼˜åŒ–ä»£ç ä½“ç§¯ï¼›<br>æ³¨ï¼š<br>â€¢ è®¾ç½® nodejs ç¯å¢ƒä¸º productionï¼›<br>â€¢ ç¦ç”¨å¼€å‘ä¸“ç”¨ä»£ç ï¼Œæ¯”å¦‚ loggerï¼›<br>â€¢ è®¾ç½®åº”ç”¨æ ¹è·¯å¾„ï¼›</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>httishere</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://httishere.github.io/2021/07/07/yuque/%E3%80%8CReact%20Practice%E3%80%8DBase/">https://httishere.github.io/2021/07/07/yuque/%E3%80%8CReact%20Practice%E3%80%8DBase/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2021 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Good Good Study, Day Day Up.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/React/"># React</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/07/08/jp_N5/">ã€Œæ—¥æœ¬èªã€ N5è¯­æ³•æ±‡æ€»</a>
            
            
            <a class="next" rel="next" href="/2021/06/30/yuque/%E3%80%8C%E5%A4%A7%E5%89%8D%E7%AB%AF%E3%80%8DDOM%20API/">ã€Œå¤§å‰ç«¯ã€DOM API</a>
            
        </section>
        
            <link rel="stylesheet" href="https://unpkg.com/gitalk@latest/dist/gitalk.css">
<div id="gitalk-container" style="margin-top: 50px;"></div>
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script src="https://priesttomb.github.io/js/md5.min.js"></script>
<script type="text/javascript">
    new Gitalk({
        clientID: '',
        clientSecret: '',
        id: window.location.pathname,
        repo: 'httIsHere.github.io',
        owner: 'httishere',
        admin: 'httishere',
        id: md5(location.pathname),
        distractionFreeMode: true
    }).render('gitalk-container')
</script>
        

    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© httishere | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
